<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detalhes do Funcionário - LUMOB</title>
    <style>
      body {
        font-family: sans-serif;
        margin: 20px;
      }
      .container {
        max-width: 900px;
        margin: auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 8px;
      }
      h1 {
        text-align: center;
        color: #333;
      }
      .section-title {
        margin-top: 25px;
        margin-bottom: 15px;
        background-color: #e9ecef;
        padding: 10px;
        border-radius: 5px;
        font-weight: bold;
      }
      p {
        margin-bottom: 8px;
      }
      strong {
        display: inline-block;
        width: 220px;
      }
      .actions {
        text-align: center;
        margin-top: 20px;
      }
      .actions button,
      .actions a {
        padding: 10px 15px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        margin: 0 5px;
        text-decoration: none;
        display: inline-block;
      }
      .actions button.delete {
        background-color: #dc3545;
      }
      .actions button:hover {
        background-color: #0056b3;
      }
      .actions button.delete:hover {
        background-color: #c82333;
      }
      .back-link {
        display: block;
        text-align: center;
        margin-top: 20px;
      }

      /* Estilo para impressão */
      @media print {
        .actions,
        .back-link {
          display: none; /* Esconde botões e links na impressão */
        }
        .container {
          box-shadow: none;
          border: none;
          margin: 0;
          padding: 0;
        }
        body {
          margin: 0;
          padding: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Detalhes do Funcionário: {{ funcionario.Nome_Completo }}</h1>

      <div class="section-title">Dados Cadastrais</div>
      <div>
        <p><strong>Matrícula:</strong> {{ funcionario.Matricula }}</p>
        <p><strong>Nome Completo:</strong> {{ funcionario.Nome_Completo }}</p>
        <p>
          <strong>Data de Admissão:</strong>
          {{ funcionario.Data_Admissao.strftime('%d/%m/%Y') if
          funcionario.Data_Admissao else 'N/A' }}
        </p>
        <p><strong>Cargo:</strong> {{ funcionario.Nome_Cargo }}</p>
        <p><strong>Nível:</strong> {{ funcionario.Nome_Nivel }}</p>
        <p><strong>Status:</strong> {{ funcionario.Status }}</p>
        <p>
          <strong>Data de Criação:</strong>
          {{ funcionario.Data_Criacao.strftime('%d/%m/%Y %H:%M:%S') if
          funcionario.Data_Criacao else 'N/A' }}
        </p>
        <p>
          <strong>Última Modificação:</strong>
          {{ funcionario.Data_Modificacao.strftime('%d/%m/%Y %H:%M:%S') if
          funcionario.Data_Modificacao else 'N/A' }}
        </p>
      </div>

      <div class="section-title">Dados Pessoais e Documentos</div>
      {# Verificar se qualquer um dos campos da tabela funcionarios_documentos
      existe para decidir se exibe a seção #} {% if funcionario.Data_Nascimento
      or funcionario.Estado_Civil or funcionario.Nacionalidade or
      funcionario.Naturalidade or funcionario.Genero or funcionario.Rg_Numero or
      funcionario.Cpf_Numero or funcionario.Ctps_Numero or funcionario.Pispasep
      or funcionario.Cnh_Numero or funcionario.TitEleitor_Numero or
      funcionario.Observacoes or funcionario.Link_Foto %}

      <div>
        <p>
          <strong>Data de Nascimento:</strong> {{
          funcionario.Data_Nascimento.strftime('%d/%m/%Y') if
          funcionario.Data_Nascimento else 'N/A' }}
        </p>
        <p>
          <strong>Estado Civil:</strong> {{ funcionario.Estado_Civil |
          default('N/A', true) }}
        </p>
        <p>
          <strong>Nacionalidade:</strong> {{ funcionario.Nacionalidade |
          default('N/A', true) }}
        </p>
        <p>
          <strong>Naturalidade:</strong> {{ funcionario.Naturalidade |
          default('N/A', true) }}
        </p>
        <p>
          <strong>Gênero:</strong> {{ funcionario.Genero | default('N/A', true)
          }}
        </p>

        <h6
          style="
            margin-top: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
          "
        >
          Documentos:
        </h6>
        <p>
          <strong>CPF:</strong> {{ funcionario.Cpf_Numero | default('N/A', true)
          }}
        </p>

        <p>
          <strong>RG:</strong> {{ funcionario.Rg_Numero | default('N/A', true)
          }}
        </p>
        {% if funcionario.Rg_Numero %}
        <p style="margin-left: 20px">
          (Órgão: {{ funcionario.Rg_OrgaoEmissor | default('N/A', true) }}, UF:
          {{ funcionario.Rg_UfEmissor | default('N/A', true) }}, Emissão: {{
          funcionario.Rg_DataEmissao.strftime('%d/%m/%Y') if
          funcionario.Rg_DataEmissao else 'N/A' }})
        </p>
        {% endif %}

        <p>
          <strong>CTPS:</strong> {{ funcionario.Ctps_Numero | default('N/A',
          true) }}
        </p>
        {% if funcionario.Ctps_Numero %}
        <p style="margin-left: 20px">
          (Série: {{ funcionario.Ctps_Serie | default('N/A', true) }})
        </p>
        {% endif %}

        <p>
          <strong>PIS/PASEP:</strong> {{ funcionario.Pispasep | default('N/A',
          true) }}
        </p>

        <p>
          <strong>CNH:</strong> {{ funcionario.Cnh_Numero | default('N/A', true)
          }}
        </p>
        {% if funcionario.Cnh_Numero %}
        <p style="margin-left: 20px">
          (Categoria: {{ funcionario.Cnh_Categoria | default('N/A', true) }},
          Validade: {{ funcionario.Cnh_DataValidade.strftime('%d/%m/%Y') if
          funcionario.Cnh_DataValidade else 'N/A' }}, Órgão: {{
          funcionario.Cnh_OrgaoEmissor | default('N/A', true) }})
        </p>
        {% endif %}

        <p>
          <strong>Título de Eleitor:</strong> {{ funcionario.TitEleitor_Numero |
          default('N/A', true) }}
        </p>
        {% if funcionario.TitEleitor_Numero %}
        <p style="margin-left: 20px">
          (Zona: {{ funcionario.TitEleitor_Zona | default('N/A', true) }},
          Seção: {{ funcionario.TitEleitor_Secao | default('N/A', true) }})
        </p>
        {% endif %}

        <p>
          <strong>Observações Documentos:</strong> {{ funcionario.Observacoes |
          default('N/A', true) }}
        </p>
        <p>
          <strong>Link da Foto:</strong>
          {% if funcionario.Link_Foto %}
          <a href="{{ pessoal_bp.funcionario.Link_Foto }}" target="_blank"
            >{{ funcionario.Link_Foto }}</a
          >
          {% else %} N/A {% endif %}
        </p>
      </div>
      {% else %}
      <p>Nenhum documento ou dado personal detalhado encontrado.</p>
      {% endif %}

      <div class="section-title">Endereços</div>
      {% if funcionario_enderecos %} {% for end in funcionario_enderecos %}
      <div>
        <p><strong>Tipo Endereço:</strong> {{ end.Tipo_Endereco }}</p>
        <p>
          <strong>Logradouro:</strong> {{ end.Logradouro }}, {{ end.Numero }} {%
          if end.Complemento %}- {{ end.Complemento }}{% endif %}
        </p>
        <p><strong>Bairro:</strong> {{ end.Bairro }}</p>
        <p>
          <strong>Cidade/Estado/CEP:</strong> {{ end.Cidade }} / {{ end.Estado
          }} - {{ end.Cep }}
        </p>
        <hr style="border-top: 1px dashed #ccc; margin: 10px 0" />
      </div>
      {% endfor %} {% else %}
      <p>Nenhum endereço encontrado.</p>
      {% endif %}

      <div class="section-title">Contatos</div>
      {% if funcionario_contatos %} {% for contato in funcionario_contatos %}
      <div>
        <p><strong>Tipo Contato:</strong> {{ contato.Tipo_Contato }}</p>
        <p><strong>Valor:</strong> {{ contato.Valor_Contato }}</p>
        {% if contato.Observacoes %}
        <p><strong>Observações:</strong> {{ contato.Observacoes }}</p>
        {% endif %}
        <hr style="border-top: 1px dashed #ccc; margin: 10px 0" />
      </div>
      {% endfor %} {% else %}
      <p>Nenhum contato encontrado.</p>
      {% endif %}

      <div class="actions">
        <a
          href="{{ url_for('pessoal_bp.edit_funcionario', matricula=funcionario.Matricula) }}"
          >Editar</a
        >
        <button
          type="button"
          onclick="window.print()"
          style="background-color: #007bff"
        >
          Imprimir
        </button>
        <form
          action="{{ url_for('pessoal_bp.delete_funcionario', matricula=funcionario.Matricula) }}"
          method="POST"
          style="display: inline"
          onsubmit="return confirm('Tem certeza que deseja excluir este funcionário? Esta ação é irreversível.');"
        >
          <button type="submit" class="delete">Excluir</button>
        </form>
      </div>

      <div class="back-link">
        <p>
          <a href="{{ url_for('pessoal_bp.funcionarios_module') }}"
            >Voltar para a Lista de Funcionários</a
          >
        </p>
      </div>
    </div>
  </body>
</html>
